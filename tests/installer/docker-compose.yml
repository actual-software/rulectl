services:
  test-linux:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # Mount the repository root so the test can access install.sh
      - ../../:/repo:ro
    environment:
      # Set to non-interactive for automated testing
      - DEBIAN_FRONTEND=noninteractive
    stdin_open: true
    tty: true

  test-macos:
    build:
      context: .
      dockerfile: Dockerfile.macos
    volumes:
      # Mount the repository root so the test can access install.sh
      - ../../:/repo:ro
    environment:
      # Set to non-interactive for automated testing
      - DEBIAN_FRONTEND=noninteractive
    stdin_open: true
    tty: true